\doxysection{src/scheduler.h File Reference}
\hypertarget{scheduler_8h}{}\label{scheduler_8h}\index{src/scheduler.h@{src/scheduler.h}}


Header file defining the kernel-\/level scheduler functions and scheduler-\/related helper functions for other kernel-\/level Penn\+OS functions.  


{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$sys/time.\+h$>$}\newline
{\ttfamily \#include $<$ucontext.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$valgrind/valgrind.\+h$>$}\newline
{\ttfamily \#include "{}pcb.\+h"{}}\newline
{\ttfamily \#include "{}signals.\+h"{}}\newline
Include dependency graph for scheduler.\+h\+:
% FIG 0
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{scheduler_8h_a78c99ffd76a7bb3c8c74db76207e9ab4}\label{scheduler_8h_a78c99ffd76a7bb3c8c74db76207e9ab4} 
\#define {\bfseries \+\_\+\+XOPEN\+\_\+\+SOURCE}~500
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{scheduler_8h_a7fc6036ab9e0db6b4e267c76289e7c50}{schedule\+\_\+ready\+\_\+process}} (\mbox{\hyperlink{structpcb__struct}{PCB}} \texorpdfstring{$\ast$}{*}pcb)
\begin{DoxyCompactList}\small\item\em Sets up a Ready process to be scheduled by adding it to one of the scheduler\textquotesingle{}s active priority queue\textquotesingle{}s. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{scheduler_8h_afa041844ed347d6a5b1008c497227e63}{set\+\_\+priority}} (\mbox{\hyperlink{structpcb__struct}{PCB}} \texorpdfstring{$\ast$}{*}pcb, int priority)
\begin{DoxyCompactList}\small\item\em Sets the a process\textquotesingle{} priority. \end{DoxyCompactList}\item 
\Hypertarget{scheduler_8h_a1d359e30ae7f170055defd0118d83f76}\label{scheduler_8h_a1d359e30ae7f170055defd0118d83f76} 
void {\bfseries scheduler\+\_\+main} (void)
\begin{DoxyCompactList}\small\item\em Runs the scheduler This function runs in a continual loop. A new process will be chosen to be run each quantum according to the priority ratios established for Penn\+OS. The chosen context will be swapped to and allowed to run for one quantum before switching back to the scheduler. The process is then checked for any status changes and is handled accordingly (either by rescheduling into an active priority queue, or addition into one of the zombie, stopped, blocked queues). At the end of each scheduler loop, there are checks for status changes in the zombie, stopped, and blocked queues which are then handled accordingly. \end{DoxyCompactList}\item 
\Hypertarget{scheduler_8h_aa7b40fd54e801b871380c5368a0a80c2}\label{scheduler_8h_aa7b40fd54e801b871380c5368a0a80c2} 
void {\bfseries init\+\_\+scheduler} (void)
\begin{DoxyCompactList}\small\item\em Initializes the scheduler This function initializes the negative (-\/1), zero (0), positive (1) queues for active processes, as well as the stopped, blocked, and zombie queues. This function also initializes the idle PCB, which will be scheduled when there are zero active processes in any priority queues. \end{DoxyCompactList}\item 
pid\+\_\+t \mbox{\hyperlink{scheduler_8h_a420dfea2ef8ce4768c9b70bb22207bb9}{get\+\_\+last\+\_\+stopped\+\_\+pcb}} (void)
\begin{DoxyCompactList}\small\item\em Gets the pid of the last stopped process. This is done by accessing the stopped\+\_\+pcbs deque. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{scheduler_8h_a94daf90f77250ad01516b0f71b9ee84c}{schedule\+\_\+sleep\+\_\+process}} (\mbox{\hyperlink{structpcb__struct}{PCB}} \texorpdfstring{$\ast$}{*}pcb, \mbox{\hyperlink{signals_8h_a1a4e0dd5d9b66b722ab954f8fb31bb7b}{pennos\+\_\+signal}} sig)
\begin{DoxyCompactList}\small\item\em Handles a change in the status of a sleep process. The function handles a change to a stopped, running/blocked, and finished/zombie\textquotesingle{}d state for a sleep process. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{scheduler_8h_aa69da23674d389fe57b815cff1599d72}{waitpid\+\_\+checks}} (\mbox{\hyperlink{structpcb__struct}{PCB}} \texorpdfstring{$\ast$}{*}pcb)
\begin{DoxyCompactList}\small\item\em Checks for any process waiting on the input process. Usually called upon a process\textquotesingle{} status change. Also handles any resulting state changes for the waiting and waited on processes. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Header file defining the kernel-\/level scheduler functions and scheduler-\/related helper functions for other kernel-\/level Penn\+OS functions. 



\doxysubsection{Function Documentation}
\Hypertarget{scheduler_8h_a420dfea2ef8ce4768c9b70bb22207bb9}\label{scheduler_8h_a420dfea2ef8ce4768c9b70bb22207bb9} 
\index{scheduler.h@{scheduler.h}!get\_last\_stopped\_pcb@{get\_last\_stopped\_pcb}}
\index{get\_last\_stopped\_pcb@{get\_last\_stopped\_pcb}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{get\_last\_stopped\_pcb()}{get\_last\_stopped\_pcb()}}
{\footnotesize\ttfamily pid\+\_\+t get\+\_\+last\+\_\+stopped\+\_\+pcb (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Gets the pid of the last stopped process. This is done by accessing the stopped\+\_\+pcbs deque. 

\begin{DoxyReturn}{Returns}
The pid of the last stopped process. 
\end{DoxyReturn}
\Hypertarget{scheduler_8h_a7fc6036ab9e0db6b4e267c76289e7c50}\label{scheduler_8h_a7fc6036ab9e0db6b4e267c76289e7c50} 
\index{scheduler.h@{scheduler.h}!schedule\_ready\_process@{schedule\_ready\_process}}
\index{schedule\_ready\_process@{schedule\_ready\_process}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{schedule\_ready\_process()}{schedule\_ready\_process()}}
{\footnotesize\ttfamily void schedule\+\_\+ready\+\_\+process (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpcb__struct}{PCB}} \texorpdfstring{$\ast$}{*}}]{pcb }\end{DoxyParamCaption})}



Sets up a Ready process to be scheduled by adding it to one of the scheduler\textquotesingle{}s active priority queue\textquotesingle{}s. 


\begin{DoxyParams}{Parameters}
{\em pcb} & The PCB of the process to be scheduled. \\
\hline
\end{DoxyParams}
\Hypertarget{scheduler_8h_a94daf90f77250ad01516b0f71b9ee84c}\label{scheduler_8h_a94daf90f77250ad01516b0f71b9ee84c} 
\index{scheduler.h@{scheduler.h}!schedule\_sleep\_process@{schedule\_sleep\_process}}
\index{schedule\_sleep\_process@{schedule\_sleep\_process}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{schedule\_sleep\_process()}{schedule\_sleep\_process()}}
{\footnotesize\ttfamily void schedule\+\_\+sleep\+\_\+process (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpcb__struct}{PCB}} \texorpdfstring{$\ast$}{*}}]{pcb,  }\item[{\mbox{\hyperlink{signals_8h_a1a4e0dd5d9b66b722ab954f8fb31bb7b}{pennos\+\_\+signal}}}]{sig }\end{DoxyParamCaption})}



Handles a change in the status of a sleep process. The function handles a change to a stopped, running/blocked, and finished/zombie\textquotesingle{}d state for a sleep process. 


\begin{DoxyParams}{Parameters}
{\em pcb} & The PCB of the sleep process. \\
\hline
{\em sig} & The signal describing the status change. \\
\hline
\end{DoxyParams}
\Hypertarget{scheduler_8h_afa041844ed347d6a5b1008c497227e63}\label{scheduler_8h_afa041844ed347d6a5b1008c497227e63} 
\index{scheduler.h@{scheduler.h}!set\_priority@{set\_priority}}
\index{set\_priority@{set\_priority}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{set\_priority()}{set\_priority()}}
{\footnotesize\ttfamily void set\+\_\+priority (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpcb__struct}{PCB}} \texorpdfstring{$\ast$}{*}}]{pcb,  }\item[{int}]{priority }\end{DoxyParamCaption})}



Sets the a process\textquotesingle{} priority. 


\begin{DoxyParams}{Parameters}
{\em pcb} & The PCB of the process whose priority will be changed \\
\hline
{\em priority} & The new priority of the process. \\
\hline
\end{DoxyParams}
\Hypertarget{scheduler_8h_aa69da23674d389fe57b815cff1599d72}\label{scheduler_8h_aa69da23674d389fe57b815cff1599d72} 
\index{scheduler.h@{scheduler.h}!waitpid\_checks@{waitpid\_checks}}
\index{waitpid\_checks@{waitpid\_checks}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{waitpid\_checks()}{waitpid\_checks()}}
{\footnotesize\ttfamily bool waitpid\+\_\+checks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpcb__struct}{PCB}} \texorpdfstring{$\ast$}{*}}]{pcb }\end{DoxyParamCaption})}



Checks for any process waiting on the input process. Usually called upon a process\textquotesingle{} status change. Also handles any resulting state changes for the waiting and waited on processes. 


\begin{DoxyParams}{Parameters}
{\em pcb} & The PCB of the process that could be waited on. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A true boolean if the input process has been waited on. 
\end{DoxyReturn}
